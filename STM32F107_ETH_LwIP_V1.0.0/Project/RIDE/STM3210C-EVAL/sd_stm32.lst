
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Project\RIDE\STM3210C-EVAL\sd_stm32.o:     file format elf32-littlearm
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Project\RIDE\STM3210C-EVAL\sd_stm32.o

Disassembly of section .text.if_setPos:

00000000 <if_setPos>:
if_setPos():
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:105
/*****************************************************************************/

esint8 if_setPos(hwInterface* file, euint32 address)
{
  return(0);
}
   0:	2000      	movs	r0, #0
   2:	4770      	bx	lr
Disassembly of section .text.if_spiSend:

00000000 <if_spiSend>:
if_spiSend():
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:139
    my_if_spiSend(iface, 0xff);
}
/*****************************************************************************/

euint8 if_spiSend(hwInterface *iface, euint8 outgoing)
{
   0:	b510      	push	{r4, lr}
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:142
  euint8 incoming;

  MSD_CS_LOW();
   2:	480c      	ldr	r0, [pc, #48]	(34 <if_spiSend+0x34>)
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:139
    my_if_spiSend(iface, 0xff);
}
/*****************************************************************************/

euint8 if_spiSend(hwInterface *iface, euint8 outgoing)
{
   4:	460c      	mov	r4, r1
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:142
  euint8 incoming;

  MSD_CS_LOW();
   6:	2110      	movs	r1, #16
   8:	f7ff fffe 	bl	0 <GPIO_ResetBits>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:144

  SPI_I2S_SendData(SPI3, outgoing);
   c:	480a      	ldr	r0, [pc, #40]	(38 <if_spiSend+0x38>)
   e:	4621      	mov	r1, r4
  10:	f7ff fffe 	bl	0 <SPI_I2S_SendData>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:146

  while (SPI_I2S_GetFlagStatus(SPI3, SPI_I2S_FLAG_TXE) == RESET);
  14:	4808      	ldr	r0, [pc, #32]	(38 <if_spiSend+0x38>)
  16:	2102      	movs	r1, #2
  18:	f7ff fffe 	bl	0 <SPI_I2S_GetFlagStatus>
  1c:	2800      	cmp	r0, #0
  1e:	d0f9      	beq.n	14 <if_spiSend+0x14>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:148

  incoming = SPI_I2S_ReceiveData(SPI3);
  20:	4805      	ldr	r0, [pc, #20]	(38 <if_spiSend+0x38>)
  22:	f7ff fffe 	bl	0 <SPI_I2S_ReceiveData>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:150

  MSD_CS_HIGH();
  26:	2110      	movs	r1, #16
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:148

  SPI_I2S_SendData(SPI3, outgoing);

  while (SPI_I2S_GetFlagStatus(SPI3, SPI_I2S_FLAG_TXE) == RESET);

  incoming = SPI_I2S_ReceiveData(SPI3);
  28:	4604      	mov	r4, r0
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:150

  MSD_CS_HIGH();
  2a:	4802      	ldr	r0, [pc, #8]	(34 <if_spiSend+0x34>)
  2c:	f7ff fffe 	bl	0 <GPIO_SetBits>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:153

  return(incoming);
}
  30:	b2e0      	uxtb	r0, r4
  32:	bd10      	pop	{r4, pc}
  34:	40010800 	.word	0x40010800
  38:	40003c00 	.word	0x40003c00
Disassembly of section .text.if_spiInit:

00000000 <if_spiInit>:
if_spiInit():
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:125
  return(incoming);
}
/*****************************************************************************/

void if_spiInit(hwInterface *iface)
{
   0:	b570      	push	{r4, r5, r6, lr}
SPI_Config():
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:53
{
  GPIO_InitTypeDef  GPIO_InitStructure;
  SPI_InitTypeDef   SPI_InitStructure;

  /* GPIOA and GPIOC Periph clock enable */
  RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOC | RCC_APB2Periph_AFIO, ENABLE);
   2:	2015      	movs	r0, #21
if_spiInit():
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:125
  return(incoming);
}
/*****************************************************************************/

void if_spiInit(hwInterface *iface)
{
   4:	b086      	sub	sp, #24
SPI_Config():
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:53
{
  GPIO_InitTypeDef  GPIO_InitStructure;
  SPI_InitTypeDef   SPI_InitStructure;

  /* GPIOA and GPIOC Periph clock enable */
  RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOC | RCC_APB2Periph_AFIO, ENABLE);
   6:	2101      	movs	r1, #1
   8:	f7ff fffe 	bl	0 <RCC_APB2PeriphClockCmd>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:55

  GPIO_PinRemapConfig(GPIO_Remap_SPI3, ENABLE);
   c:	4830      	ldr	r0, [pc, #192]	(d0 <if_spiInit+0xd0>)
   e:	2101      	movs	r1, #1
  10:	f7ff fffe 	bl	0 <GPIO_PinRemapConfig>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:58

  /* SPI3 Periph clock enable */
  RCC_APB1PeriphClockCmd(RCC_APB1Periph_SPI3, ENABLE);
  14:	f44f 4000 	mov.w	r0, #32768	; 0x8000
  18:	2101      	movs	r1, #1
  1a:	f7ff fffe 	bl	0 <RCC_APB1PeriphClockCmd>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:64

  /* Configure SPI3 pins: SCK, MISO and MOSI */
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10 | GPIO_Pin_11 | GPIO_Pin_12;
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
  GPIO_Init(GPIOC, &GPIO_InitStructure);
  1e:	ad05      	add	r5, sp, #20
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:61

  /* SPI3 Periph clock enable */
  RCC_APB1PeriphClockCmd(RCC_APB1Periph_SPI3, ENABLE);

  /* Configure SPI3 pins: SCK, MISO and MOSI */
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10 | GPIO_Pin_11 | GPIO_Pin_12;
  20:	f44f 53e0 	mov.w	r3, #7168	; 0x1c00
  24:	f8ad 3014 	strh.w	r3, [sp, #20]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:62
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  28:	2603      	movs	r6, #3
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:63
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
  2a:	2318      	movs	r3, #24
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:64
  GPIO_Init(GPIOC, &GPIO_InitStructure);
  2c:	4829      	ldr	r0, [pc, #164]	(d4 <if_spiInit+0xd4>)
  2e:	4629      	mov	r1, r5
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:67

  /* Configure PA4 pin: CS pin */
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4;
  30:	2410      	movs	r4, #16
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:63
  RCC_APB1PeriphClockCmd(RCC_APB1Periph_SPI3, ENABLE);

  /* Configure SPI3 pins: SCK, MISO and MOSI */
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10 | GPIO_Pin_11 | GPIO_Pin_12;
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
  32:	f88d 3017 	strb.w	r3, [sp, #23]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:62
  /* SPI3 Periph clock enable */
  RCC_APB1PeriphClockCmd(RCC_APB1Periph_SPI3, ENABLE);

  /* Configure SPI3 pins: SCK, MISO and MOSI */
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10 | GPIO_Pin_11 | GPIO_Pin_12;
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  36:	f88d 6016 	strb.w	r6, [sp, #22]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:64
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
  GPIO_Init(GPIOC, &GPIO_InitStructure);
  3a:	f7ff fffe 	bl	0 <GPIO_Init>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:70

  /* Configure PA4 pin: CS pin */
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4;
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
  GPIO_Init(GPIOA, &GPIO_InitStructure);
  3e:	4826      	ldr	r0, [pc, #152]	(d8 <if_spiInit+0xd8>)
  40:	4629      	mov	r1, r5
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:67
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
  GPIO_Init(GPIOC, &GPIO_InitStructure);

  /* Configure PA4 pin: CS pin */
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4;
  42:	f8ad 4014 	strh.w	r4, [sp, #20]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:69
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
  46:	f88d 4017 	strb.w	r4, [sp, #23]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:68
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
  GPIO_Init(GPIOC, &GPIO_InitStructure);

  /* Configure PA4 pin: CS pin */
  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4;
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  4a:	f88d 6016 	strb.w	r6, [sp, #22]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:70
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
  GPIO_Init(GPIOA, &GPIO_InitStructure);
  4e:	f7ff fffe 	bl	0 <GPIO_Init>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:73

  /* SPI3 Config */
  SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex;
  52:	f04f 0300 	mov.w	r3, #0	; 0x0
  56:	f8ad 3002 	strh.w	r3, [sp, #2]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:74
  SPI_InitStructure.SPI_Mode = SPI_Mode_Master;
  5a:	f44f 7382 	mov.w	r3, #260	; 0x104
  5e:	f8ad 3004 	strh.w	r3, [sp, #4]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:75
  SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b;
  62:	f04f 0300 	mov.w	r3, #0	; 0x0
  66:	f8ad 3006 	strh.w	r3, [sp, #6]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:76
  SPI_InitStructure.SPI_CPOL = SPI_CPOL_Low;
  6a:	f8ad 3008 	strh.w	r3, [sp, #8]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:77
  SPI_InitStructure.SPI_CPHA = SPI_CPHA_1Edge;
  6e:	f8ad 300a 	strh.w	r3, [sp, #10]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:78
  SPI_InitStructure.SPI_NSS = SPI_NSS_Soft;
  72:	f44f 7300 	mov.w	r3, #512	; 0x200
  76:	f8ad 300c 	strh.w	r3, [sp, #12]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:79
  SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_2;
  7a:	f04f 0300 	mov.w	r3, #0	; 0x0
  7e:	f8ad 300e 	strh.w	r3, [sp, #14]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:80
  SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;
  82:	f8ad 3010 	strh.w	r3, [sp, #16]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:82
  SPI_InitStructure.SPI_CRCPolynomial = 7;
  SPI_Init(SPI3, &SPI_InitStructure);
  86:	4815      	ldr	r0, [pc, #84]	(dc <if_spiInit+0xdc>)
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:81
  SPI_InitStructure.SPI_CPOL = SPI_CPOL_Low;
  SPI_InitStructure.SPI_CPHA = SPI_CPHA_1Edge;
  SPI_InitStructure.SPI_NSS = SPI_NSS_Soft;
  SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_2;
  SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;
  SPI_InitStructure.SPI_CRCPolynomial = 7;
  88:	f04f 0307 	mov.w	r3, #7	; 0x7
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:82
  SPI_Init(SPI3, &SPI_InitStructure);
  8c:	f10d 0102 	add.w	r1, sp, #2	; 0x2
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:81
  SPI_InitStructure.SPI_CPOL = SPI_CPOL_Low;
  SPI_InitStructure.SPI_CPHA = SPI_CPHA_1Edge;
  SPI_InitStructure.SPI_NSS = SPI_NSS_Soft;
  SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_2;
  SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;
  SPI_InitStructure.SPI_CRCPolynomial = 7;
  90:	f8ad 3012 	strh.w	r3, [sp, #18]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:82
  SPI_Init(SPI3, &SPI_InitStructure);
  94:	f7ff fffe 	bl	0 <SPI_Init>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:85

  /* SPI3 enable */
  SPI_Cmd(SPI3, ENABLE);
  98:	4810      	ldr	r0, [pc, #64]	(dc <if_spiInit+0xdc>)
  9a:	2101      	movs	r1, #1
  9c:	f7ff fffe 	bl	0 <SPI_Cmd>
if_spiInit():
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:130
{
  euint8 i;

  SPI_Config();

  MSD_CS_HIGH();
  a0:	4621      	mov	r1, r4
  a2:	480d      	ldr	r0, [pc, #52]	(d8 <if_spiInit+0xd8>)
  a4:	f7ff fffe 	bl	0 <GPIO_SetBits>
  a8:	2400      	movs	r4, #0
my_if_spiSend():
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:116

static euint8 my_if_spiSend(hwInterface *iface, euint8 outgoing)
{
  euint8 incoming;

  SPI_I2S_SendData(SPI3, outgoing);
  aa:	480c      	ldr	r0, [pc, #48]	(dc <if_spiInit+0xdc>)
  ac:	21ff      	movs	r1, #255
  ae:	f7ff fffe 	bl	0 <SPI_I2S_SendData>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:117
  while (SPI_I2S_GetFlagStatus(SPI3, SPI_I2S_FLAG_TXE) == RESET);
  b2:	480a      	ldr	r0, [pc, #40]	(dc <if_spiInit+0xdc>)
  b4:	2102      	movs	r1, #2
  b6:	f7ff fffe 	bl	0 <SPI_I2S_GetFlagStatus>
  ba:	2800      	cmp	r0, #0
  bc:	d0f9      	beq.n	b2 <if_spiInit+0xb2>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:118
  incoming = SPI_I2S_ReceiveData(SPI3);
  be:	4807      	ldr	r0, [pc, #28]	(dc <if_spiInit+0xdc>)
  c0:	f7ff fffe 	bl	0 <SPI_I2S_ReceiveData>
if_spiInit():
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:133
  SPI_Config();

  MSD_CS_HIGH();

  /* Send 20 spi commands with card not selected */
  for (i = 0;i < 21;i++)
  c4:	1c63      	adds	r3, r4, #1
  c6:	b2dc      	uxtb	r4, r3
  c8:	2c15      	cmp	r4, #21
  ca:	d1ee      	bne.n	aa <SPI_I2S_ReceiveData+0xaa>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:135
    my_if_spiSend(iface, 0xff);
}
  cc:	b006      	add	sp, #24
  ce:	bd70      	pop	{r4, r5, r6, pc}
  d0:	00201000 	.word	0x00201000
  d4:	40011000 	.word	0x40011000
  d8:	40010800 	.word	0x40010800
  dc:	40003c00 	.word	0x40003c00
Disassembly of section .text.if_initInterface:

00000000 <if_initInterface>:
if_initInterface():
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:157
  return(incoming);
}
/*****************************************************************************/

esint8 if_initInterface(hwInterface* file, eint8* opts)
{
   0:	b513      	push	{r0, r1, r4, lr}
   2:	4604      	mov	r4, r0
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:160
  euint32 sc;

  if_spiInit(file); /* init at low speed */
   4:	f7ff fffe 	bl	0 <if_initInterface>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:162

  if (sd_Init(file) < 0)
   8:	4620      	mov	r0, r4
   a:	f7ff fffe 	bl	0 <sd_Init>
   e:	f010 0f80 	tst.w	r0, #128	; 0x80
  12:	d001      	beq.n	18 <if_initInterface+0x18>
  14:	20ff      	movs	r0, #255
  16:	e014      	b.n	42 <if_initInterface+0x42>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:167
  {
    DBG((TXT("Card failed to init, breaking up...\n")));
    return(-1);
  }
  if (sd_State(file) < 0)
  18:	4620      	mov	r0, r4
  1a:	f7ff fffe 	bl	0 <sd_State>
  1e:	f010 0f80 	tst.w	r0, #128	; 0x80
  22:	d001      	beq.n	28 <if_initInterface+0x28>
  24:	20fe      	movs	r0, #254
  26:	e00c      	b.n	42 <if_initInterface+0x42>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:173
  {
    DBG((TXT("Card didn't return the ready state, breaking up...\n")));
    return(-2);
  }

  sd_getDriveSize(file, &sc);
  28:	4620      	mov	r0, r4
  2a:	a901      	add	r1, sp, #4
  2c:	f7ff fffe 	bl	0 <sd_getDriveSize>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:174
  file->sectorCount = sc / 512;
  30:	9b01      	ldr	r3, [sp, #4]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:175
  if ( (sc % 512) != 0)
  32:	05d8      	lsls	r0, r3, #23
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:174
    DBG((TXT("Card didn't return the ready state, breaking up...\n")));
    return(-2);
  }

  sd_getDriveSize(file, &sc);
  file->sectorCount = sc / 512;
  34:	0a5a      	lsrs	r2, r3, #9
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:175
  if ( (sc % 512) != 0)
  36:	0dc0      	lsrs	r0, r0, #23
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:174
    DBG((TXT("Card didn't return the ready state, breaking up...\n")));
    return(-2);
  }

  sd_getDriveSize(file, &sc);
  file->sectorCount = sc / 512;
  38:	6022      	str	r2, [r4, #0]
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:175
  if ( (sc % 512) != 0)
  3a:	b110      	cbz	r0, 42 <sd_getDriveSize+0x42>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:177
  {
    file->sectorCount--;
  3c:	1e53      	subs	r3, r2, #1
  3e:	6023      	str	r3, [r4, #0]
  40:	2000      	movs	r0, #0
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:184

  DBG((TXT("Drive Size is %lu Bytes (%lu Sectors)\n"), sc, file->sectorCount));
  DBG((TXT("Init done...\n")));

  return(0);
}
  42:	b240      	sxtb	r0, r0
  44:	bd1c      	pop	{r2, r3, r4, pc}
  46:	46c0      	nop			(mov r8, r8)
Disassembly of section .text.if_writeBuf:

00000000 <if_writeBuf>:
if_writeBuf():
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:97
  return(sd_readSector(file, address, buf, 512));
}
/*****************************************************************************/

esint8 if_writeBuf(hwInterface* file, euint32 address, euint8* buf)
{
   0:	b510      	push	{r4, lr}
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:98
  return(sd_writeSector(file, address, buf));
   2:	f7ff fffe 	bl	0 <sd_writeSector>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:99
}
   6:	b240      	sxtb	r0, r0
   8:	bd10      	pop	{r4, pc}
   a:	46c0      	nop			(mov r8, r8)
Disassembly of section .text.if_readBuf:

00000000 <if_readBuf>:
if_readBuf():
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:91
}

/*****************************************************************************/

esint8 if_readBuf(hwInterface* file, euint32 address, euint8* buf)
{
   0:	b510      	push	{r4, lr}
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:92
  return(sd_readSector(file, address, buf, 512));
   2:	f44f 7300 	mov.w	r3, #512	; 0x200
   6:	f7ff fffe 	bl	0 <sd_readSector>
D:\SAV\STM32_Documents\lwip_st_STM32\STM32F107_ETH_LwIP_V1.0.0\Utilities\efsl\source\interface/sd_stm32.c:93
}
   a:	b240      	sxtb	r0, r0
   c:	bd10      	pop	{r4, pc}
   e:	46c0      	nop			(mov r8, r8)
